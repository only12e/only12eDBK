# 博客系统数据库设计文档

## 系统概述
本文档为博客系统的数据库表结构设计，支持以下核心功能：
- 用户认证和权限管理（管理系统和博客系统共用账号）
- 文章管理（首页内容）
- 项目展示和管理
- 工具推荐和介绍
- 技术栈展示（支持ECharts图表）
- 评论和互动系统（点赞、回复）
- 浏览统计和热门排行

---

## 数据库表结构设计

### 1. 用户相关表

#### 1.1 用户表 (users)
```sql
CREATE TABLE blog_users (
    id INT PRIMARY KEY AUTO_INCREMENT COMMENT '用户ID，主键',
    username VARCHAR(50) UNIQUE NOT NULL COMMENT '用户名，唯一，用于登录',
    password VARCHAR(255) NOT NULL COMMENT '密码，加密存储',
    email VARCHAR(100) UNIQUE COMMENT '邮箱地址，唯一',
    nickname VARCHAR(50) COMMENT '昵称，显示用',
    avatar VARCHAR(255) COMMENT '头像URL地址',
    role ENUM('admin', 'user') DEFAULT 'user' COMMENT '用户角色：admin管理员/user普通用户',
    status TINYINT DEFAULT 1 COMMENT '账号状态：1启用/0禁用',
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '更新时间'
);
```

**字段作用说明：**
- `id`: 用户唯一标识
- `username`: 登录用名，需要唯一
- `password`: 加密后的密码
- `email`: 邮箱，可用于找回密码
- `nickname`: 显示名称，评论时显示
- `avatar`: 头像图片地址
- `role`: 区分管理员和普通用户，管理员可访问管理系统
- `status`: 账号是否可用，方便管理员禁用用户

---

### 2. 文章相关表

#### 2.1 文章分类表 (article_categories)
```sql
CREATE TABLE blog_article_categories (
    id INT PRIMARY KEY AUTO_INCREMENT COMMENT '分类ID，主键',
    name VARCHAR(50) NOT NULL COMMENT '分类名称',
    description TEXT COMMENT '分类描述',
    sort_order INT DEFAULT 0 COMMENT '排序权重，数字越大越靠前',
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间'
);
```

**字段作用说明：**
- `name`: 分类名称，如"技术分享"、"生活随笔"等
- `description`: 分类的详细描述
- `sort_order`: 控制分类显示顺序

#### 2.2 文章表 (articles)
```sql
CREATE TABLE blog_articles (
    id INT PRIMARY KEY AUTO_INCREMENT COMMENT '文章ID，主键',
    title VARCHAR(200) NOT NULL COMMENT '文章标题',
    summary TEXT COMMENT '文章摘要/简介',
    content LONGTEXT NOT NULL COMMENT '文章内容，富文本',
    cover_image VARCHAR(255) COMMENT '封面图片URL',
    category_id INT COMMENT '文章分类ID',
    author_id INT NOT NULL COMMENT '作者ID，关联users表',
    status ENUM('draft', 'published', 'hidden') DEFAULT 'draft' COMMENT '文章状态：草稿/已发布/隐藏',
    is_featured TINYINT DEFAULT 0 COMMENT '是否精选文章：1是/0否',
    view_count INT DEFAULT 0 COMMENT '浏览次数',
    like_count INT DEFAULT 0 COMMENT '点赞数量',
    comment_count INT DEFAULT 0 COMMENT '评论数量',
    published_at TIMESTAMP NULL COMMENT '发布时间',
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '更新时间',
    FOREIGN KEY (category_id) REFERENCES article_categories(id),
    FOREIGN KEY (author_id) REFERENCES users(id)
);
```

**字段作用说明：**
- `summary`: 在文章列表中显示的摘要
- `cover_image`: 文章封面，提升视觉效果
- `status`: 控制文章是否公开展示
- `is_featured`: 用于首页展示热门文章
- `view_count/like_count/comment_count`: 统计数据，在文章列表右下角显示
- `published_at`: 实际发布时间，与创建时间分开

---

### 3. 技术栈相关表

#### 3.1 技术栈表 (technologies)
```sql
CREATE TABLE blog_technologies (
    id INT PRIMARY KEY AUTO_INCREMENT COMMENT '技术栈ID，主键',
    name VARCHAR(50) NOT NULL COMMENT '技术名称，如React、Vue等',
    logo_url VARCHAR(255) COMMENT '技术Logo图片URL',
    description TEXT COMMENT '技术简短描述',
    content LONGTEXT COMMENT '技术栈详细介绍，富文本，支持文字+图片',
    category ENUM('frontend', 'backend', 'database', 'devtools', 'other') COMMENT '技术分类',
    proficiency_level INT DEFAULT 0 COMMENT '熟练度评分（0-100）',
    recommendation_level INT DEFAULT 0 COMMENT '推荐度评分（0-100）',
    is_featured TINYINT DEFAULT 0 COMMENT '是否在首页展示：1是/0否',
    sort_order INT DEFAULT 0 COMMENT '排序权重',
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '更新时间'
);
```

**字段作用说明：**
- `logo_url`: 技术栈图标，提升视觉效果
- `description`: 简短描述，用于列表展示
- `content`: 详细介绍，支持富文本和图片，用于详情页面
- `category`: 便于分类管理和展示
- `proficiency_level`: 熟练度评分，用于ECharts图表展示
- `recommendation_level`: 推荐度评分，用于ECharts图表展示
- `is_featured`: 控制哪些技术栈在首页右侧显示

---

### 4. 项目相关表

#### 4.1 项目表 (projects)
```sql
CREATE TABLE blog_projects (
    id INT PRIMARY KEY AUTO_INCREMENT COMMENT '项目ID，主键',
    name VARCHAR(100) NOT NULL COMMENT '项目名称',
    description TEXT COMMENT '项目简介描述',
    content LONGTEXT COMMENT '项目详细说明，富文本',
    cover_image VARCHAR(255) COMMENT '项目封面图片URL',
    demo_url VARCHAR(255) COMMENT '项目演示地址',
    github_url VARCHAR(255) COMMENT 'GitHub仓库地址',
    website_url VARCHAR(255) COMMENT '其他相关网站地址',
    status ENUM('active', 'completed', 'archived') DEFAULT 'active' COMMENT '项目状态：进行中/已完成/已归档',
    is_featured TINYINT DEFAULT 0 COMMENT '是否为热门项目：1是/0否',
    difficulty_level ENUM('beginner', 'intermediate', 'advanced') COMMENT '项目难度级别',
    view_count INT DEFAULT 0 COMMENT '浏览次数',
    like_count INT DEFAULT 0 COMMENT '点赞数量',
    comment_count INT DEFAULT 0 COMMENT '评论数量',
    sort_order INT DEFAULT 0 COMMENT '排序权重',
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '更新时间'
);
```

**字段作用说明：**
- `demo_url/github_url/website_url`: 项目相关的外部链接，方便用户跳转
- `status`: 标明项目当前状态
- `is_featured`: 用于首页热门项目排行榜
- `difficulty_level`: 帮助用户了解项目难度
- `content`: 项目详细说明页面的内容

#### 4.2 项目技术栈关联表 (project_technologies)
```sql
CREATE TABLE blog_project_technologies (
    id INT PRIMARY KEY AUTO_INCREMENT COMMENT '关联ID',
    project_id INT NOT NULL COMMENT '项目ID',
    technology_id INT NOT NULL COMMENT '技术栈ID',
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',
    FOREIGN KEY (project_id) REFERENCES blog_projects(id) ON DELETE CASCADE,
    FOREIGN KEY (technology_id) REFERENCES blog_technologies(id)
);
```

**字段作用说明：**
- 多对多关系表，用于展示项目使用了哪些技术
- 便于按技术栈筛选项目

---

### 5. 工具相关表

#### 5.1 工具表 (tools)
```sql
CREATE TABLE blog_tools (
    id INT PRIMARY KEY AUTO_INCREMENT COMMENT '工具ID，主键',
    name VARCHAR(100) NOT NULL COMMENT '工具名称',
    description TEXT COMMENT '工具描述说明',
    content LONGTEXT COMMENT '工具详细介绍，富文本',
    cover_image VARCHAR(255) COMMENT '工具封面图片',
    icon_url VARCHAR(255) COMMENT '工具图标URL',
    official_url VARCHAR(255) COMMENT '官方网站地址',
    download_url VARCHAR(255) COMMENT '下载地址',
    category VARCHAR(50) COMMENT '工具分类，如编辑器、浏览器插件等',
    price_type ENUM('free', 'paid', 'freemium') DEFAULT 'free' COMMENT '价格类型：免费/付费/免费增值',
    rating DECIMAL(2,1) DEFAULT 0 COMMENT '个人评分（0-5）',
    is_recommended TINYINT DEFAULT 0 COMMENT '是否推荐：1是/0否',
    sort_order INT DEFAULT 0 COMMENT '排序权重',
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '更新时间'
);
```

**字段作用说明：**
- `content`: 详细介绍，支持富文本和图片
- `icon_url`: 工具图标，便于识别
- `official_url/download_url`: 方便用户访问和下载
- `category`: 工具分类，便于管理和筛选
- `price_type`: 标明工具的收费情况
- `rating`: 个人使用体验评分
- `is_recommended`: 用于首页推荐工具展示

---

### 6. 评论和互动相关表

#### 6.1 评论表 (comments)
```sql
CREATE TABLE blog_comments (
    id INT PRIMARY KEY AUTO_INCREMENT COMMENT '评论ID，主键',
    content TEXT NOT NULL COMMENT '评论内容',
    user_id INT NOT NULL COMMENT '评论用户ID',
    target_type ENUM('article', 'project', 'tool') NOT NULL COMMENT '评论目标类型：文章/项目/工具',
    target_id INT NOT NULL COMMENT '评论目标ID',
    parent_id INT DEFAULT NULL COMMENT '父评论ID，用于回复功能',
    like_count INT DEFAULT 0 COMMENT '评论点赞数',
    status ENUM('approved', 'pending', 'rejected') DEFAULT 'approved' COMMENT '审核状态',
    ip_address VARCHAR(45) COMMENT '评论者IP地址',
    user_agent TEXT COMMENT '浏览器信息',
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP COMMENT '评论时间',
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '更新时间',
    FOREIGN KEY (user_id) REFERENCES users(id),
    FOREIGN KEY (parent_id) REFERENCES comments(id) ON DELETE SET NULL
);
```

**字段作用说明：**
- `target_type/target_id`: 通用设计，支持文章、项目、工具的评论
- `parent_id`: 实现评论回复功能，形成评论树结构
- `status`: 支持评论审核机制，防止恶意评论
- `ip_address/user_agent`: 便于管理和防止恶意评论

#### 6.2 点赞记录表 (likes)
```sql
CREATE TABLE blog_likes (
    id INT PRIMARY KEY AUTO_INCREMENT COMMENT '点赞ID',
    user_id INT NOT NULL COMMENT '点赞用户ID',
    target_type ENUM('article', 'project', 'tool', 'comment') NOT NULL COMMENT '点赞目标类型',
    target_id INT NOT NULL COMMENT '点赞目标ID',
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP COMMENT '点赞时间',
    UNIQUE KEY unique_like (user_id, target_type, target_id) COMMENT '防止重复点赞',
    FOREIGN KEY (user_id) REFERENCES users(id)
);
```

**字段作用说明：**
- 通用设计，支持对文章、项目、工具、评论的点赞
- 唯一索引防止用户重复点赞同一内容

#### 6.3 浏览记录表 (views)
```sql
CREATE TABLE blog_views (
    id INT PRIMARY KEY AUTO_INCREMENT COMMENT '浏览记录ID',
    user_id INT COMMENT '用户ID，游客为NULL',
    target_type ENUM('article', 'project', 'tool') NOT NULL COMMENT '浏览目标类型',
    target_id INT NOT NULL COMMENT '浏览目标ID',
    ip_address VARCHAR(45) COMMENT '访问者IP',
    user_agent TEXT COMMENT '浏览器信息',
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP COMMENT '浏览时间',
    INDEX idx_target (target_type, target_id),
    INDEX idx_user_time (user_id, created_at)
);
```

**字段作用说明：**
- 记录浏览数据，用于统计热门内容
- 支持游客和注册用户的浏览记录
- 通过IP地址可以去重和统计独立访客

---

### 7. 辅助表

#### 7.1 系统配置表 (system_configs)
```sql
CREATE TABLE blog_system_configs (
    id INT PRIMARY KEY AUTO_INCREMENT COMMENT '配置ID',
    config_key VARCHAR(100) NOT NULL UNIQUE COMMENT '配置键名',
    config_value TEXT COMMENT '配置值',
    description VARCHAR(255) COMMENT '配置说明',
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '更新时间'
);
```

**字段作用说明：**
- 存储系统全局配置信息
- 如网站标题、备案信息、统计代码等

#### 7.2 友情链接表 (friendly_links)
```sql
CREATE TABLE blog_friendly_links (
    id INT PRIMARY KEY AUTO_INCREMENT COMMENT '链接ID',
    name VARCHAR(100) NOT NULL COMMENT '链接名称',
    url VARCHAR(255) NOT NULL COMMENT '链接地址',
    description TEXT COMMENT '链接描述',
    logo_url VARCHAR(255) COMMENT 'Logo图片URL',
    status TINYINT DEFAULT 1 COMMENT '状态：1启用/0禁用',
    sort_order INT DEFAULT 0 COMMENT '排序权重',
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间'
);
```

**字段作用说明：**
- 管理友情链接
- 支持启用/禁用和排序

---

## 完整建表SQL脚本

```sql
-- 博客系统数据库表结构
-- 创建时间：2025年
-- 表名前缀：blog_

-- 1. 用户表
CREATE TABLE blog_users (
    id INT PRIMARY KEY AUTO_INCREMENT COMMENT '用户ID，主键',
    username VARCHAR(50) UNIQUE NOT NULL COMMENT '用户名，唯一，用于登录',
    password VARCHAR(255) NOT NULL COMMENT '密码，加密存储',
    email VARCHAR(100) UNIQUE COMMENT '邮箱地址，唯一',
    nickname VARCHAR(50) COMMENT '昵称，显示用',
    avatar VARCHAR(255) COMMENT '头像URL地址',
    role ENUM('admin', 'user') DEFAULT 'user' COMMENT '用户角色：admin管理员/user普通用户',
    status TINYINT DEFAULT 1 COMMENT '账号状态：1启用/0禁用',
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '更新时间'
);

-- 2. 文章分类表
CREATE TABLE blog_article_categories (
    id INT PRIMARY KEY AUTO_INCREMENT COMMENT '分类ID，主键',
    name VARCHAR(50) NOT NULL COMMENT '分类名称',
    description TEXT COMMENT '分类描述',
    sort_order INT DEFAULT 0 COMMENT '排序权重，数字越大越靠前',
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间'
);

-- 3. 文章表
CREATE TABLE blog_articles (
    id INT PRIMARY KEY AUTO_INCREMENT COMMENT '文章ID，主键',
    title VARCHAR(200) NOT NULL COMMENT '文章标题',
    summary TEXT COMMENT '文章摘要/简介',
    content LONGTEXT NOT NULL COMMENT '文章内容，富文本',
    cover_image VARCHAR(255) COMMENT '封面图片URL',
    category_id INT COMMENT '文章分类ID',
    author_id INT NOT NULL COMMENT '作者ID，关联users表',
    status ENUM('draft', 'published', 'hidden') DEFAULT 'draft' COMMENT '文章状态：草稿/已发布/隐藏',
    is_featured TINYINT DEFAULT 0 COMMENT '是否精选文章：1是/0否',
    view_count INT DEFAULT 0 COMMENT '浏览次数',
    like_count INT DEFAULT 0 COMMENT '点赞数量',
    comment_count INT DEFAULT 0 COMMENT '评论数量',
    published_at TIMESTAMP NULL COMMENT '发布时间',
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '更新时间',
    FOREIGN KEY (category_id) REFERENCES blog_article_categories(id),
    FOREIGN KEY (author_id) REFERENCES blog_users(id)
);

-- 4. 技术栈表
CREATE TABLE blog_technologies (
    id INT PRIMARY KEY AUTO_INCREMENT COMMENT '技术栈ID，主键',
    name VARCHAR(50) NOT NULL COMMENT '技术名称，如React、Vue等',
    logo_url VARCHAR(255) COMMENT '技术Logo图片URL',
    description TEXT COMMENT '技术简短描述',
    content LONGTEXT COMMENT '技术栈详细介绍，富文本，支持文字+图片',
    category ENUM('frontend', 'backend', 'database', 'devtools', 'other') COMMENT '技术分类',
    proficiency_level INT DEFAULT 0 COMMENT '熟练度评分（0-100）',
    recommendation_level INT DEFAULT 0 COMMENT '推荐度评分（0-100）',
    is_featured TINYINT DEFAULT 0 COMMENT '是否在首页展示：1是/0否',
    sort_order INT DEFAULT 0 COMMENT '排序权重',
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '更新时间'
);

-- 5. 项目表
CREATE TABLE blog_projects (
    id INT PRIMARY KEY AUTO_INCREMENT COMMENT '项目ID，主键',
    name VARCHAR(100) NOT NULL COMMENT '项目名称',
    description TEXT COMMENT '项目简介描述',
    content LONGTEXT COMMENT '项目详细说明，富文本',
    cover_image VARCHAR(255) COMMENT '项目封面图片URL',
    demo_url VARCHAR(255) COMMENT '项目演示地址',
    github_url VARCHAR(255) COMMENT 'GitHub仓库地址',
    website_url VARCHAR(255) COMMENT '其他相关网站地址',
    status ENUM('active', 'completed', 'archived') DEFAULT 'active' COMMENT '项目状态：进行中/已完成/已归档',
    is_featured TINYINT DEFAULT 0 COMMENT '是否为热门项目：1是/0否',
    difficulty_level ENUM('beginner', 'intermediate', 'advanced') COMMENT '项目难度级别',
    view_count INT DEFAULT 0 COMMENT '浏览次数',
    like_count INT DEFAULT 0 COMMENT '点赞数量',
    comment_count INT DEFAULT 0 COMMENT '评论数量',
    sort_order INT DEFAULT 0 COMMENT '排序权重',
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '更新时间'
);

-- 6. 项目技术栈关联表
CREATE TABLE blog_project_technologies (
    id INT PRIMARY KEY AUTO_INCREMENT COMMENT '关联ID',
    project_id INT NOT NULL COMMENT '项目ID',
    technology_id INT NOT NULL COMMENT '技术栈ID',
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',
    FOREIGN KEY (project_id) REFERENCES blog_projects(id) ON DELETE CASCADE,
    FOREIGN KEY (technology_id) REFERENCES blog_technologies(id)
);

-- 7. 工具表
CREATE TABLE blog_tools (
    id INT PRIMARY KEY AUTO_INCREMENT COMMENT '工具ID，主键',
    name VARCHAR(100) NOT NULL COMMENT '工具名称',
    description TEXT COMMENT '工具描述说明',
    content LONGTEXT COMMENT '工具详细介绍，富文本',
    cover_image VARCHAR(255) COMMENT '工具封面图片',
    icon_url VARCHAR(255) COMMENT '工具图标URL',
    official_url VARCHAR(255) COMMENT '官方网站地址',
    download_url VARCHAR(255) COMMENT '下载地址',
    category VARCHAR(50) COMMENT '工具分类，如编辑器、浏览器插件等',
    price_type ENUM('free', 'paid', 'freemium') DEFAULT 'free' COMMENT '价格类型：免费/付费/免费增值',
    rating DECIMAL(2,1) DEFAULT 0 COMMENT '个人评分（0-5）',
    is_recommended TINYINT DEFAULT 0 COMMENT '是否推荐：1是/0否',
    sort_order INT DEFAULT 0 COMMENT '排序权重',
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '更新时间'
);

-- 8. 评论表（通用）
CREATE TABLE blog_comments (
    id INT PRIMARY KEY AUTO_INCREMENT COMMENT '评论ID，主键',
    content TEXT NOT NULL COMMENT '评论内容',
    user_id INT NOT NULL COMMENT '评论用户ID',
    target_type ENUM('article', 'project', 'tool', 'technology') NOT NULL COMMENT '评论目标类型：文章/项目/工具/技术栈',
    target_id INT NOT NULL COMMENT '评论目标ID',
    parent_id INT DEFAULT NULL COMMENT '父评论ID，用于回复功能',
    like_count INT DEFAULT 0 COMMENT '评论点赞数',
    status ENUM('approved', 'pending', 'rejected') DEFAULT 'approved' COMMENT '审核状态',
    ip_address VARCHAR(45) COMMENT '评论者IP地址',
    user_agent TEXT COMMENT '浏览器信息',
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP COMMENT '评论时间',
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '更新时间',
    FOREIGN KEY (user_id) REFERENCES blog_users(id),
    FOREIGN KEY (parent_id) REFERENCES blog_comments(id) ON DELETE SET NULL
);

-- 9. 点赞记录表
CREATE TABLE blog_likes (
    id INT PRIMARY KEY AUTO_INCREMENT COMMENT '点赞ID',
    user_id INT NOT NULL COMMENT '点赞用户ID',
    target_type ENUM('article', 'project', 'tool', 'technology', 'comment') NOT NULL COMMENT '点赞目标类型',
    target_id INT NOT NULL COMMENT '点赞目标ID',
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP COMMENT '点赞时间',
    UNIQUE KEY unique_like (user_id, target_type, target_id) COMMENT '防止重复点赞',
    FOREIGN KEY (user_id) REFERENCES blog_users(id)
);

-- 10. 浏览记录表
CREATE TABLE blog_views (
    id INT PRIMARY KEY AUTO_INCREMENT COMMENT '浏览记录ID',
    user_id INT COMMENT '用户ID，游客为NULL',
    target_type ENUM('article', 'project', 'tool', 'technology') NOT NULL COMMENT '浏览目标类型',
    target_id INT NOT NULL COMMENT '浏览目标ID',
    ip_address VARCHAR(45) COMMENT '访问者IP',
    user_agent TEXT COMMENT '浏览器信息',
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP COMMENT '浏览时间',
    INDEX idx_target (target_type, target_id),
    INDEX idx_user_time (user_id, created_at)
);

-- 11. 系统配置表
CREATE TABLE blog_system_configs (
    id INT PRIMARY KEY AUTO_INCREMENT COMMENT '配置ID',
    config_key VARCHAR(100) NOT NULL UNIQUE COMMENT '配置键名',
    config_value TEXT COMMENT '配置值',
    description VARCHAR(255) COMMENT '配置说明',
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '更新时间'
);

-- 12. 友情链接表
CREATE TABLE blog_friendly_links (
    id INT PRIMARY KEY AUTO_INCREMENT COMMENT '链接ID',
    name VARCHAR(100) NOT NULL COMMENT '链接名称',
    url VARCHAR(255) NOT NULL COMMENT '链接地址',
    description TEXT COMMENT '链接描述',
    logo_url VARCHAR(255) COMMENT 'Logo图片URL',
    status TINYINT DEFAULT 1 COMMENT '状态：1启用/0禁用',
    sort_order INT DEFAULT 0 COMMENT '排序权重',
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间'
);

-- 创建索引以优化查询性能
CREATE INDEX idx_articles_status ON blog_articles(status);
CREATE INDEX idx_articles_featured ON blog_articles(is_featured);
CREATE INDEX idx_projects_featured ON blog_projects(is_featured);
CREATE INDEX idx_technologies_featured ON blog_technologies(is_featured);
CREATE INDEX idx_tools_recommended ON blog_tools(is_recommended);
CREATE INDEX idx_comments_target ON blog_comments(target_type, target_id);
```

---

## 修改后的设计总结

### ✅ 现在完全支持富文本内容（文字+图片）的模块：

1. **文章** - `content LONGTEXT` 支持富文本
2. **项目** - `content LONGTEXT` 支持富文本  
3. **工具** - `content LONGTEXT` 支持富文本
4. **技术栈** - `content LONGTEXT` 支持富文本 **（新增）**

### 主要改进点：

1. **统一表名前缀** - 所有表名添加 `blog_` 前缀，避免命名冲突
2. **完善技术栈表** - 添加 `content` 字段支持富文本详细介绍
3. **扩展评论和互动** - 评论、点赞、浏览支持技术栈模块
4. **修正外键引用** - 更新所有外键引用为新的表名

### 设计特点：

- **模块化设计** - 四大内容模块都支持完整的富文本展示
- **通用互动系统** - 统一的评论、点赞、浏览统计
- **灵活的内容管理** - 支持草稿、发布、隐藏等状态
- **完善的数据统计** - 为热门排行和ECharts图表提供数据支持

现在这个数据库设计完全满足你的博客系统需求，所有四个模块都支持丰富的图文内容展示。